---
title: 开发过程中的问题以及解决方案
tags: [经验之谈，开发环境]
---

在日常开发过程中，经常会遇到一些非技术性的问题，比如国外仓库下载太慢，系统升级后一些命令行莫名其妙的不能用了等一系列问题，这里收集一些自己遇到的此类问题，方便在后续开发过程中能迅速查找并解决问题。

<!-- more -->

#### Git拉取远端仓库，出现 `The ECDSA host key for <xxx.xxx.com> has changed, and the key for the corresponding IP Address 'x.x.x.x' is unknown.`

因为之前从远端拉取过代码，本地的know_hosts已经缓存了相应的信息，再次连接ssh会自动匹配之前保存的信息。如果本地系统重装或者ssh被删除，都会出现此类错误。删掉对应的域名缓存信息即可。

- 删除掉known_hosts里面的信息

```shell
ssh-keygen -R <xx.com or ip>
```

- 或者直接删掉 `~/.ssh/known_hosts` 文件

```shell
rm -rf ~/.ssh/known_hosts
```

#### 升级系统后出现，`xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun`

原因：Xcode命令行工具没有正确安装。

解决方法：重装xcode command line

```shell
xcode-select --install
```

### Mac下如何生成目录树

有时候需要展示一下源码的文件结构，类似于下面的文件目录树，肿么办呢？

![file-tree](https://snowyblog.oss-cn-shenzhen.aliyuncs.com/file_tree.png)



Mac下安装一下 `tree` 命令行

```shell
brew install tree
```

打开文件目录，输入以下命令，就能以树形结构展示当前目录下所有文件

```shell
tree -l
```

### Git clone 出现 `transfer closed with outstanding read data remaining`

原因有两个：1 缓存区溢出

```shell
git config --global http.postBuffer 524288000
```

2 网络速度太慢

```shell
git config --global http.lowSpeedLimit 0
git config --global http.lowSpeedTime 99999
```

### Git clone 太慢

代码仓库在国外，国内访问速度很慢，需要本地电脑开启SS，然后为git添加全局代理

```shell
git config --global http.https://github.com.proxy socks5://127.0.0.1:1086
```

那个1086端口，要替换成自己电脑的端口号，下图是我自己电脑的配置

![socks5](https://snowyblog.oss-cn-shenzhen.aliyuncs.com/socks5_port.png)

如果想去掉代理，在终端执行以下命令

```shell
git config --global --unset http.https://github.com.proxy
```

### 用cocoapods安装的第三方库默认iOS Deployment Target 4.3，导致工程编译错误

```ruby
post_install do |installer| 
    installer.pods_project.targets.each do |target| 
        target.build_configurations.each do |config| 
            config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'] = '8.0' 
        end 
    end 
end
```

将上面的代码中的`8.0`替换成你要的系统版本号后，粘贴在`podfile`文件后面，执行`pod update` 或者 `pod install` 即可。

### pod update 获取不到最新repo

因为 `~/.cocoapods/repos/master` 中的索引仓库是旧的，需要手动更新一下：

```shell
pod repo update
```

### pods的第三方库有好多Warning

不想改第三方库的源码，那就直接禁用第三方库的警告

```shell
pod 'SSZipArchive', :inhibit_warnings => true
```

### SVN 仓库报错 `version is locked`

以CornerStone 为例，选中一个仓库workingCopy，右键 -> Clean

### SVN 报错 "An error occurred while contacting the repository."

删除钥匙串中SVN相关密码，重启SVN客户端。

### Xcode 工程编译脚本权限错误 ：`xxx.sh: Permission denied

```shell
chmod a+x xxx.sh
```

### xcode-select: error: tool ‘xcodebuild’ requires Xcode

xcodebuild需要调用Xcode去执行命令，但是xcode-select指向的路径是/Library/Developer/CommandLineTools，不是Xcode路径，所以将路径切换到Xcode路径下就OK了

```shell
sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer
```

### Xcode unable to run app in simulator

Xcode 界面，`shift + command +2` 快速进入`devices`窗口，查看当前的可用设备，找到无法启动的模拟器，删除并重新创建一个新的模拟器，再次运行该模拟器即可
